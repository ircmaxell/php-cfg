<?php
function gen_one_to_three() {
    for ($i = 1; $i <= 3; $i++) {
        // Note that $i is preserved between yields.
        yield $i;
    }
}
$generator = gen_one_to_three();
foreach ($generator as $value) {
    echo "$value\n";
}
-----
Block#1
    Stmt_Function
        name: gen_one_to_three
    Expr_FuncCall
        name: LITERAL('gen_one_to_three')
        result: TEMP(#1)
    Expr_Assign
        var: TEMP(#2 <VARIABLE($generator)>)
        expr: TEMP(#1)
        result: TEMP(#3)
    Iterator_Reset
        var: TEMP(#2 <VARIABLE($generator)>)
    Stmt_Jump
        target: Block#2

Block#2
    Parent: Block#1
    Parent: Block#3
    Iterator_Valid
        var: TEMP(#2 <VARIABLE($generator)>)
        result: TEMP(#4)
    Stmt_JumpIf
        cond: TEMP(#4)
        if: Block#3
        else: Block#4

Block#3
    Parent: Block#2
    Iterator_Value
        var: TEMP(#2 <VARIABLE($generator)>)
        result: TEMP(#5)
    Expr_Assign
        var: TEMP(#6 <VARIABLE($value)>)
        expr: TEMP(#5)
        result: TEMP(#7)
    Expr_ConcatList
        list[0]: TEMP(#6 <VARIABLE($value)>)
        list[1]: LITERAL('
        ')
        result: TEMP(#8)
    Terminal_Echo
        expr: TEMP(#8)
    Stmt_Jump
        target: Block#2

Block#4
    Parent: Block#2
    Terminal_Return

Function 'gen_one_to_three': mixed
Block#1
    Expr_Assign
        var: TEMP(#1 <VARIABLE($i)>)
        expr: LITERAL(1)
        result: TEMP(#2)
    Stmt_Jump
        target: Block#2

Block#2
    Parent: Block#1
    Parent: Block#5
    TEMP(#3 <VARIABLE($i)>) = Phi(TEMP(#1 <VARIABLE($i)>), TEMP(#4 <VARIABLE($i)>))
    Expr_BinaryOp_SmallerOrEqual
        left: TEMP(#3 <VARIABLE($i)>)
        right: LITERAL(3)
        result: TEMP(#5)
    Stmt_JumpIf
        cond: TEMP(#5)
        if: Block#3
        else: Block#4

Block#3
    Parent: Block#2
    Expr_Yield
        key: TEMP(#3 <VARIABLE($i)>)
        result: TEMP(#6)
    Stmt_Jump
        target: Block#5

Block#4
    Parent: Block#2
    Terminal_Return

Block#5
    Parent: Block#3
    Expr_BinaryOp_Plus
        left: TEMP(#3 <VARIABLE($i)>)
        right: LITERAL(1)
        result: TEMP(#7)
    Expr_Assign
        var: TEMP(#4 <VARIABLE($i)>)
        expr: TEMP(#7)
        result: TEMP(#8)
    Stmt_Jump
        target: Block#2